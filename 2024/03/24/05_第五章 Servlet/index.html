<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="05_第五章 Servlet, valtsit">
    <meta name="description" content="第五章 Servlet一 Servlet 简介1.1 动态资源和静态资源
静态资源


无需在程序运行时通过代码运行生成的资源,在程序运行之前就写好的资源. 例如:html css js img ,音频文件和视频文件


动态资源


需要">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>05_第五章 Servlet | valtsit</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 7.1.1"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">valtsit</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">valtsit</div>
        <div class="logo-desc">
            
             『你就将不再是道具 而是成为人如其名的人』
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/valtsit/valtsit.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/valtsit/valtsit.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/5.webp')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">05_第五章 Servlet</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/web/">
                                <span class="chip bg-color">web</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2024-03-24
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="第五章-Servlet"><a href="#第五章-Servlet" class="headerlink" title="第五章 Servlet"></a>第五章 Servlet</h1><h1 id="一-Servlet-简介"><a href="#一-Servlet-简介" class="headerlink" title="一 Servlet 简介"></a>一 Servlet 简介</h1><h2 id="1-1-动态资源和静态资源"><a href="#1-1-动态资源和静态资源" class="headerlink" title="1.1 动态资源和静态资源"></a>1.1 动态资源和静态资源</h2><blockquote>
<p>静态资源</p>
</blockquote>
<ul>
<li>无需在程序运行时通过代码运行生成的资源,在程序运行之前就写好的资源. 例如:html css js img ,音频文件和视频文件</li>
</ul>
<blockquote>
<p>动态资源</p>
</blockquote>
<ul>
<li>需要在程序运行时通过代码运行生成的资源,在程序运行之前无法确定的数据,运行时动态生成,例如 Servlet,Thymeleaf … …</li>
<li>动态资源指的不是视图上的动画效果或者是简单的人机交互效果</li>
</ul>
<blockquote>
<p>生活举例</p>
</blockquote>
<ul>
<li>去蛋糕店买蛋糕<ul>
<li>直接买柜台上已经做好的 : 静态资源</li>
<li>和柜员说要求后现场制作 : 动态资源</li>
</ul>
</li>
</ul>
<h2 id="1-2-Servlet-简介"><a href="#1-2-Servlet-简介" class="headerlink" title="1.2 Servlet 简介"></a>1.2 Servlet 简介</h2><blockquote>
<p>Servlet (server applet) 是运行在服务端(tomcat)的 Java 小程序，是 sun 公司提供一套定义动态资源规范; 从代码层面上来讲 Servlet 就是一个接口</p>
</blockquote>
<ul>
<li>用来接收、处理客户端请求、响应给浏览器的动态资源。在整个 Web 应用中，Servlet 主要负责接收处理请求、协同调度功能以及响应数据。我们可以把 Servlet 称为 Web 应用中的<strong>控制器</strong></li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1681544428055.png" alt="1681544428055" style="zoom:50%;">



<ul>
<li>不是所有的 JAVA 类都能用于处理客户端请求,能处理客户端请求并做出响应的一套技术标准就是 Servlet![](05_第五章 Servlet&#x2F;1681544428055.png)</li>
<li>Servlet 是运行在服务端的,所以 Servlet 必须在 WEB 项目中开发且在 Tomcat 这样的服务容器中运行<blockquote>
<p>请求响应与 HttpServletRequest 和 HttpServletResponse 之间的对应关系</p>
</blockquote>
</li>
</ul>
<p><img src="/images/1681699577344.png" alt="1681699577344"></p>
<h1 id="二-Servlet-开发流程"><a href="#二-Servlet-开发流程" class="headerlink" title="二 Servlet 开发流程"></a>二 Servlet 开发流程</h1><h2 id="2-1-目标"><a href="#2-1-目标" class="headerlink" title="2.1 目标"></a>2.1 目标</h2><blockquote>
<p>校验注册时,用户名是否被占用. 通过客户端向一个 Servlet 发送请求,携带 username,如果用户名是’atguigu’,则向客户端响应 NO,如果是其他,响应 YES</p>
</blockquote>
<h2 id="2-2-开发过程"><a href="#2-2-开发过程" class="headerlink" title="2.2 开发过程"></a>2.2 开发过程</h2><blockquote>
<p>步骤 1 开发一个 web 类型的 module</p>
</blockquote>
<ul>
<li>过程参照之前</li>
</ul>
<blockquote>
<p>步骤 2 开发一个 UserServlet</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServlet</span>  <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 获取请求中的参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;atguigu&quot;</span>.equals(username))&#123;</span><br><span class="line">            <span class="comment">//通过响应对象响应信息</span></span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;NO&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;YES&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>自定义一个类,要继承 HttpServlet 类</li>
<li>重写 service 方法,该方法主要就是用于处理用户请求的服务方法</li>
<li>HttpServletRequest 代表请求对象,是有请求报文经过 tomcat 转换而来的,通过该对象可以获取请求中的信息</li>
<li>HttpServletResponse 代表响应对象,该对象会被 tomcat 转换为响应的报文,通过该对象可以设置响应中的信息</li>
<li>Servlet 对象的生命周期(创建,初始化,处理服务,销毁)是由 tomcat 管理的,无需我们自己 new</li>
<li>HttpServletRequest HttpServletResponse 两个对象也是有 tomcat 负责转换,在调用 service 方法时传入给我们用的</li>
</ul>
<blockquote>
<p>步骤 3 在 web.xml 为 UseServlet 配置请求的映射路径</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;5.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--给UserServlet起一个别名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>userServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.atguigu.servlet.UserServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--关联别名和映射路径--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>userServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--可以为一个Servlet匹配多个不同的映射路径,但是不同的Servlet不能使用相同的url-pattern--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/userServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- &lt;url-pattern&gt;/userServlet2&lt;/url-pattern&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            /        表示通配所有资源,不包括jsp文件</span></span><br><span class="line"><span class="comment">            /*       表示通配所有资源,包括jsp文件</span></span><br><span class="line"><span class="comment">            /a/*     匹配所有以a前缀的映射路径</span></span><br><span class="line"><span class="comment">            *.action 匹配所有以action为后缀的映射路径</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- &lt;url-pattern&gt;/*&lt;/url-pattern&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Servlet 并不是文件系统中实际存在的文件或者目录,所以为了能够请求到该资源,我们需要为其配置映射路径</li>
<li>servlet 的请求映射路径配置在 web.xml 中</li>
<li>servlet-name 作为 servlet 的别名,可以自己随意定义,见名知意就好</li>
<li>url-pattern 标签用于定义 Servlet 的请求映射路径</li>
<li>一个 servlet 可以对应多个不同的 url-pattern</li>
<li>多个 servlet 不能使用相同的 url-pattern</li>
<li>url-pattern 中可以使用一些通配写法<ul>
<li>&#x2F; 表示通配所有资源,不包括 jsp 文件</li>
<li>&#x2F;* 表示通配所有资源,包括 jsp 文件</li>
<li>&#x2F;a&#x2F;* 匹配所有以 a 前缀的映射路径</li>
<li>*.action 匹配所有以 action 为后缀的映射路径</li>
</ul>
</li>
</ul>
<blockquote>
<p>步骤 4 开发一个 form 表单,向 servlet 发送一个 get 请求并携带 username 参数</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;userServlet&quot;</span>&gt;</span></span><br><span class="line">      请输入用户名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;校验&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>启动项目,访问 index.html ,提交表单测试</p>
</blockquote>
<ul>
<li>使用 debug 模式运行测试</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1681547333799.png" alt="1681547333799">

<blockquote>
<p>映射关系图</p>
</blockquote>
<p><img src="/images/1681550398774.png" alt="1681550398774"></p>
<h1 id="三-Servlet-注解方式配置"><a href="#三-Servlet-注解方式配置" class="headerlink" title="三 Servlet 注解方式配置"></a>三 Servlet 注解方式配置</h1><h2 id="3-1-WebServlet-注解源码"><a href="#3-1-WebServlet-注解源码" class="headerlink" title="3.1 @WebServlet 注解源码"></a>3.1 @WebServlet 注解源码</h2><blockquote>
<p>官方 JAVAEEAPI 文档下载地址</p>
</blockquote>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://www.oracle.com/java/technologies/javaee/javaeetechnologies.html#javaee8">Java EE - Technologies (oracle.com)</a></p>
</li>
<li><p>@WebServlet 注解的源码阅读</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> jakarta.servlet.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Documented;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> Servlet 3.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Target(&#123; ElementType.TYPE &#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> WebServlet &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The name of the servlet</span></span><br><span class="line"><span class="comment">     * 相当于 servlet-name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the name of the servlet</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">name</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The URL patterns of the servlet</span></span><br><span class="line"><span class="comment">     * 如果只配置一个url-pattern ,则通过该属性即可,和urlPatterns属性互斥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the URL patterns of the servlet</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String[] value() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The URL patterns of the servlet</span></span><br><span class="line"><span class="comment">     * 如果要配置多个url-pattern ,需要通过该属性,和value属性互斥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the URL patterns of the servlet</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String[] urlPatterns() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The load-on-startup order of the servlet</span></span><br><span class="line"><span class="comment">     * 配置Servlet是否在项目加载时实例化</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the load-on-startup order of the servlet</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">loadOnStartup</span><span class="params">()</span> <span class="keyword">default</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The init parameters of the servlet</span></span><br><span class="line"><span class="comment">     * 配置初始化参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the init parameters of the servlet</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    WebInitParam[] initParams() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Declares whether the servlet supports asynchronous operation mode.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if the servlet supports asynchronous operation mode</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> jakarta.servlet.ServletRequest#startAsync</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> jakarta.servlet.ServletRequest#startAsync( jakarta.servlet.ServletRequest,jakarta.servlet.ServletResponse)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">asyncSupported</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The small-icon of the servlet</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the small-icon of the servlet</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">smallIcon</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The large-icon of the servlet</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the large-icon of the servlet</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">largeIcon</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The description of the servlet</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the description of the servlet</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">description</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The display name of the servlet</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the display name of the servlet</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">displayName</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="3-2-WebServlet-注解使用"><a href="#3-2-WebServlet-注解使用" class="headerlink" title="3.2 @WebServlet 注解使用"></a>3.2 @WebServlet 注解使用</h2><blockquote>
<p>使用@WebServlet 注解替换 Servlet 配置</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(</span></span><br><span class="line"><span class="meta">        name = &quot;userServlet&quot;,</span></span><br><span class="line"><span class="meta">        //value = &quot;/user&quot;,</span></span><br><span class="line"><span class="meta">        urlPatterns = &#123;&quot;/userServlet1&quot;,&quot;/userServlet2&quot;,&quot;/userServlet&quot;&#125;,</span></span><br><span class="line"><span class="meta">        initParams = &#123;@WebInitParam(name = &quot;encoding&quot;,value = &quot;UTF-8&quot;)&#125;,</span></span><br><span class="line"><span class="meta">        loadOnStartup = 6</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServlet</span>  <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">encoding</span> <span class="operator">=</span> getServletConfig().getInitParameter(<span class="string">&quot;encoding&quot;</span>);</span><br><span class="line">        System.out.println(encoding);</span><br><span class="line">        <span class="comment">// 获取请求中的参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;atguigu&quot;</span>.equals(username))&#123;</span><br><span class="line">            <span class="comment">//通过响应对象响应信息</span></span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;NO&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;YES&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="四-Servlet-生命周期"><a href="#四-Servlet-生命周期" class="headerlink" title="四 Servlet 生命周期"></a>四 Servlet 生命周期</h1><h2 id="4-1-生命周期简介"><a href="#4-1-生命周期简介" class="headerlink" title="4.1 生命周期简介"></a>4.1 生命周期简介</h2><blockquote>
<p>什么是 Servlet 的生命周期</p>
</blockquote>
<ul>
<li>应用程序中的对象不仅在空间上有层次结构的关系，在时间上也会因为处于程序运行过程中的不同阶段而表现出不同状态和不同行为——这就是对象的生命周期。</li>
<li>简单的叙述生命周期，就是对象在容器中从开始创建到销毁的过程。</li>
</ul>
<blockquote>
<p>Servlet 容器</p>
</blockquote>
<ul>
<li>Servlet 对象是 Servlet 容器创建的，生命周期方法都是由容器(目前我们使用的是 Tomcat)调用的。这一点和我们之前所编写的代码有很大不同。在今后的学习中我们会看到，越来越多的对象交给容器或框架来创建，越来越多的方法由容器或框架来调用，开发人员要尽可能多的将精力放在业务逻辑的实现上。</li>
</ul>
<blockquote>
<p>Servlet 主要的生命周期执行特点</p>
</blockquote>
<table>
<thead>
<tr>
<th>生命周期</th>
<th>对应方法</th>
<th>执行时机</th>
<th>执行次数</th>
</tr>
</thead>
<tbody><tr>
<td>构造对象</td>
<td>构造器</td>
<td>第一次请求或者容器启动</td>
<td>1</td>
</tr>
<tr>
<td>初始化</td>
<td>init()</td>
<td>构造完毕后</td>
<td>1</td>
</tr>
<tr>
<td>处理服务</td>
<td>service(HttpServletRequest req,HttpServletResponse resp)</td>
<td>每次请求</td>
<td>多次</td>
</tr>
<tr>
<td>销毁</td>
<td>destory()</td>
<td>容器关闭</td>
<td>1</td>
</tr>
</tbody></table>
<h2 id="4-2-生命周期测试"><a href="#4-2-生命周期测试" class="headerlink" title="4.2 生命周期测试"></a>4.2 生命周期测试</h2><blockquote>
<p>开发 servlet 代码</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.servlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletLifeCycle</span>  <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ServletLifeCycle</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;构造器&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;初始化方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;销毁方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>配置 Servlet</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servletLifeCycle<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.atguigu.servlet.ServletLifeCycle<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--load-on-startup</span></span><br><span class="line"><span class="comment">        如果配置的是正整数则表示容器在启动时就要实例化Servlet,</span></span><br><span class="line"><span class="comment">        数字表示的是实例化的顺序</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servletLifeCycle<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servletLiftCycle<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>请求 Servlet 测试</li>
</ul>
<p>略</p>
<h2 id="4-3-生命周期总结"><a href="#4-3-生命周期总结" class="headerlink" title="4.3 生命周期总结"></a>4.3 生命周期总结</h2><ol>
<li>通过生命周期测试我们发现 Servlet 对象在容器中是单例的</li>
<li>容器是可以处理并发的用户请求的,每个请求在容器中都会开启一个线程</li>
<li>多个线程可能会使用相同的 Servlet 对象,所以在 Servlet 中,我们不要轻易定义一些容易经常发生修改的成员变量</li>
<li>load-on-startup 中定义的正整数表示实例化顺序,如果数字重复了,容器会自行解决实例化顺序问题,但是应该避免重复</li>
<li>Tomcat 容器中,已经定义了一些随系统启动实例化的 servlet,我们自定义的 servlet 的 load-on-startup 尽量不要占用数字 1-5</li>
</ol>
<h1 id="五-Servlet-继承结构"><a href="#五-Servlet-继承结构" class="headerlink" title="五 Servlet 继承结构"></a>五 Servlet 继承结构</h1><h2 id="5-1-Servlet-接口"><a href="#5-1-Servlet-接口" class="headerlink" title="5.1 Servlet 接口"></a>5.1 Servlet 接口</h2><blockquote>
<p>源码及功能解释</p>
</blockquote>
<ul>
<li>通过 idea 查看: 此处略</li>
</ul>
<blockquote>
<p>接口及方法说明</p>
</blockquote>
<ul>
<li>Servlet 规范接口,所有的 Servlet 必须实现<ul>
<li>public void init(ServletConfig config) throws ServletException;<ul>
<li>初始化方法,容器在构造 servlet 对象后,自动调用的方法,容器负责实例化一个 ServletConfig 对象,并在调用该方法时传入</li>
<li>ServletConfig 对象可以为 Servlet 提供初始化参数</li>
</ul>
</li>
<li>public ServletConfig getServletConfig();<ul>
<li>获取 ServletConfig 对象的方法,后续可以通过该对象获取 Servlet 初始化参数</li>
</ul>
</li>
<li>public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException;<ul>
<li>处理请求并做出响应的服务方法,每次请求产生时由容器调用</li>
<li>容器创建一个 ServletRequest 对象和 ServletResponse 对象,容器在调用 service 方法时,传入这两个对象</li>
</ul>
</li>
<li>public String getServletInfo();<ul>
<li>获取 ServletInfo 信息的方法</li>
</ul>
</li>
<li>public void destroy();<ul>
<li>Servlet 实例在销毁之前调用的方法</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-2-GenericServlet-抽象类"><a href="#5-2-GenericServlet-抽象类" class="headerlink" title="5.2 GenericServlet 抽象类"></a>5.2 GenericServlet 抽象类</h2><blockquote>
<p>源码</p>
</blockquote>
<ul>
<li>通过 idea 查看: 此处略</li>
</ul>
<blockquote>
<p>源码解释</p>
</blockquote>
<ul>
<li>GenericServlet 抽象类是对 Servlet 接口一些固定功能的粗糙实现,以及对 service 方法的再次抽象声明,并定义了一些其他相关功能方法<ul>
<li>private transient ServletConfig config;<ul>
<li>初始化配置对象作为属性</li>
</ul>
</li>
<li>public GenericServlet() { }<ul>
<li>构造器,为了满足继承而准备</li>
</ul>
</li>
<li>public void destroy() { }<ul>
<li>销毁方法的平庸实现</li>
</ul>
</li>
<li>public String getInitParameter(String name)<ul>
<li>获取初始参数的快捷方法</li>
</ul>
</li>
<li>public Enumeration<String> getInitParameterNames()<ul>
<li>返回所有初始化参数名的方法</li>
</ul>
</String></li>
<li>public ServletConfig getServletConfig()<ul>
<li>获取初始 Servlet 初始配置对象 ServletConfig 的方法</li>
</ul>
</li>
<li>public ServletContext getServletContext()<ul>
<li>获取上下文对象 ServletContext 的方法</li>
</ul>
</li>
<li>public String getServletInfo()<ul>
<li>获取 Servlet 信息的平庸实现</li>
</ul>
</li>
<li>public void init(ServletConfig config) throws ServletException()<ul>
<li>初始化方法的实现,并在此调用了 init 的重载方法</li>
</ul>
</li>
<li>public void init() throws ServletException<ul>
<li>重载 init 方法,为了让我们自己定义初始化功能的方法</li>
</ul>
</li>
<li>public void log(String msg)</li>
<li>public void log(String message, Throwable t)<ul>
<li>打印日志的方法及重载</li>
</ul>
</li>
<li>public abstract void service(ServletRequest req, ServletResponse res) throws ServletException, IOException;<ul>
<li>服务方法再次声明</li>
</ul>
</li>
<li>public String getServletName()<ul>
<li>获取 ServletName 的方法</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-3-HttpServlet-抽象类"><a href="#5-3-HttpServlet-抽象类" class="headerlink" title="5.3 HttpServlet 抽象类"></a>5.3 HttpServlet 抽象类</h2><blockquote>
<p>源码</p>
</blockquote>
<ul>
<li>通过 idea 查看: 此处略</li>
</ul>
<blockquote>
<p>解释</p>
</blockquote>
<ul>
<li>abstract class HttpServlet extends GenericServlet HttpServlet 抽象类,除了基本的实现以外,增加了更多的基础功能<ul>
<li>private static final String METHOD_DELETE &#x3D; “DELETE”;</li>
<li>private static final String METHOD_HEAD &#x3D; “HEAD”;</li>
<li>private static final String METHOD_GET &#x3D; “GET”;</li>
<li>private static final String METHOD_OPTIONS &#x3D; “OPTIONS”;</li>
<li>private static final String METHOD_POST &#x3D; “POST”;</li>
<li>private static final String METHOD_PUT &#x3D; “PUT”;</li>
<li>private static final String METHOD_TRACE &#x3D; “TRACE”;<ul>
<li>上述属性用于定义常见请求方式名常量值</li>
</ul>
</li>
<li>public HttpServlet() {}<ul>
<li>构造器,用于处理继承</li>
</ul>
</li>
<li>public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException<ul>
<li>对服务方法的实现</li>
<li>在该方法中,将请求和响应对象转换成对应 HTTP 协议的 HttpServletRequest HttpServletResponse 对象</li>
<li>调用重载的 service 方法</li>
</ul>
</li>
<li>public void service(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException<ul>
<li>重载的 service 方法,被重写的 service 方法所调用</li>
<li>在该方法中,通过请求方式判断,调用具体的 do***方法完成请求的处理</li>
</ul>
</li>
<li>protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException</li>
<li>protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException</li>
<li>protected void doHead(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException</li>
<li>protected void doPut(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException</li>
<li>protected void doDelete(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException</li>
<li>protected void doOptions(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException</li>
<li>protected void doTrace(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException<ul>
<li>对应不同请求方式的处理方法</li>
<li>除了 doOptions 和 doTrace 方法,其他的 do*** 方法都在故意响应错误信息</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-4-自定义-Servlet"><a href="#5-4-自定义-Servlet" class="headerlink" title="5.4 自定义 Servlet"></a>5.4 自定义 Servlet</h2><blockquote>
<p>继承关系图解</p>
</blockquote>
<p><img src="/images/1682299663047.png" alt="1682299663047"></p>
<ul>
<li>自定义 Servlet 中,必须要对处理请求的方法进行重写<ul>
<li>要么重写 service 方法</li>
<li>要么重写 doGet&#x2F;doPost 方法</li>
</ul>
</li>
</ul>
<h1 id="六-ServletConfig-和-ServletContext"><a href="#六-ServletConfig-和-ServletContext" class="headerlink" title="六 ServletConfig 和 ServletContext"></a>六 ServletConfig 和 ServletContext</h1><h2 id="6-1-ServletConfig-的使用"><a href="#6-1-ServletConfig-的使用" class="headerlink" title="6.1 ServletConfig 的使用"></a>6.1 ServletConfig 的使用</h2><blockquote>
<p>ServletConfig 是什么</p>
</blockquote>
<ul>
<li>为 Servlet 提供初始配置参数的一种对象,每个 Servlet 都有自己独立唯一的 ServletConfig 对象</li>
<li>容器会为每个 Servlet 实例化一个 ServletConfig 对象,并通过 Servlet 生命周期的 init 方法传入给 Servlet 作为属性</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682302307081.png" alt="1682302307081">

<blockquote>
<p>ServletConfig 是一个接口,定义了如下 API</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> jakarta.servlet;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ServletConfig</span> &#123;</span><br><span class="line">    String <span class="title function_">getServletName</span><span class="params">()</span>;</span><br><span class="line">    ServletContext <span class="title function_">getServletContext</span><span class="params">()</span>;</span><br><span class="line">    String <span class="title function_">getInitParameter</span><span class="params">(String var1)</span>;</span><br><span class="line">    Enumeration&lt;String&gt; <span class="title function_">getInitParameterNames</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>方法名</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>getServletName()</td>
<td>获取&lt;servlet-name&gt;HelloServlet&lt;&#x2F;servlet-name&gt;定义的 Servlet 名称</td>
</tr>
<tr>
<td>getServletContext()</td>
<td>获取 ServletContext 对象</td>
</tr>
<tr>
<td>getInitParameter()</td>
<td>获取配置 Servlet 时设置的『初始化参数』，根据名字获取值</td>
</tr>
<tr>
<td>getInitParameterNames()</td>
<td>获取所有初始化参数名组成的 Enumeration 对象</td>
</tr>
</tbody></table>
<blockquote>
<p>ServletConfig 怎么用,测试代码如下</p>
</blockquote>
<ul>
<li>定义 Servlet</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletA</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletConfig();</span><br><span class="line">        <span class="comment">// 根据参数名获取单个参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> servletConfig.getInitParameter(<span class="string">&quot;param1&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;param1:&quot;</span>+value);</span><br><span class="line">        <span class="comment">// 获取所有参数名</span></span><br><span class="line">        Enumeration&lt;String&gt; parameterNames = servletConfig.getInitParameterNames();</span><br><span class="line">        <span class="comment">// 迭代并获取参数名</span></span><br><span class="line">        <span class="keyword">while</span> (parameterNames.hasMoreElements()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">paramaterName</span> <span class="operator">=</span> parameterNames.nextElement();</span><br><span class="line">            System.out.println(paramaterName+<span class="string">&quot;:&quot;</span>+servletConfig.getInitParameter(paramaterName));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletB</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletConfig();</span><br><span class="line">        <span class="comment">// 根据参数名获取单个参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> servletConfig.getInitParameter(<span class="string">&quot;param1&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;param1:&quot;</span>+value);</span><br><span class="line">        <span class="comment">// 获取所有参数名</span></span><br><span class="line">        Enumeration&lt;String&gt; parameterNames = servletConfig.getInitParameterNames();</span><br><span class="line">        <span class="comment">// 迭代并获取参数名</span></span><br><span class="line">        <span class="keyword">while</span> (parameterNames.hasMoreElements()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">paramaterName</span> <span class="operator">=</span> parameterNames.nextElement();</span><br><span class="line">            System.out.println(paramaterName+<span class="string">&quot;:&quot;</span>+servletConfig.getInitParameter(paramaterName));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>配置 Servlet</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletA<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.atguigu.servlet.ServletA<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--配置ServletA的初始参数--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>param1<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>value1<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>param2<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>value2<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletB<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.atguigu.servlet.ServletB<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--配置ServletB的初始参数--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>param3<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>value3<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>param4<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>value4<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletA<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servletA<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletB<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servletB<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>请求 Servlet 测试</li>
</ul>
<p>略</p>
<h2 id="6-2-ServletContext-的使用"><a href="#6-2-ServletContext-的使用" class="headerlink" title="6.2 ServletContext 的使用"></a>6.2 ServletContext 的使用</h2><blockquote>
<p>ServletContext 是什么</p>
</blockquote>
<ul>
<li>ServletContext 对象有称呼为上下文对象,或者叫应用域对象(后面统一讲解域对象)</li>
<li>容器会为每个 app 创建一个独立的唯一的 ServletContext 对象</li>
<li>ServletContext 对象为所有的 Servlet 所共享</li>
<li>ServletContext 可以为所有的 Servlet 提供初始配置参数</li>
</ul>
<p><img src="/images/1682303205351.png" alt="1682303205351"></p>
<blockquote>
<p>ServletContext 怎么用</p>
</blockquote>
<ul>
<li>配置 ServletContext 参数</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;5.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>paramA<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>valueA<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>paramB<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>valueB<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在 Servlet 中获取 ServletContext 并获取参数</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletConfig;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletA</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 从ServletContext中获取为所有的Servlet准备的参数</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        <span class="type">String</span> <span class="variable">valueA</span> <span class="operator">=</span> servletContext.getInitParameter(<span class="string">&quot;paramA&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;paramA:&quot;</span>+valueA);</span><br><span class="line">        <span class="comment">// 获取所有参数名</span></span><br><span class="line">        Enumeration&lt;String&gt; initParameterNames = servletContext.getInitParameterNames();</span><br><span class="line">        <span class="comment">// 迭代并获取参数名</span></span><br><span class="line">        <span class="keyword">while</span> (initParameterNames.hasMoreElements()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">paramaterName</span> <span class="operator">=</span> initParameterNames.nextElement();</span><br><span class="line">            System.out.println(paramaterName+<span class="string">&quot;:&quot;</span>+servletContext.getInitParameter(paramaterName));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-3-ServletContext-其他重要-API"><a href="#6-3-ServletContext-其他重要-API" class="headerlink" title="6.3 ServletContext 其他重要 API"></a>6.3 ServletContext 其他重要 API</h2><blockquote>
<p>获取资源的真实路径</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;资源在web目录中的路径&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>例如我们的目标是需要获取项目中某个静态资源的路径，不是工程目录中的路径，而是<strong>部署目录中的路径</strong>；我们如果直接拷贝其在我们电脑中的完整路径的话其实是有问题的，因为如果该项目以后部署到公司服务器上的话，路径肯定是会发生改变的，所以我们需要使用代码动态获取资源的真实路径. 只要使用了 servletContext 动态获取资源的真实路径，<strong>那么无论项目的部署路径发生什么变化，都会动态获取项目运行时候的实际路径</strong>，所以就不会发生由于写死真实路径而导致项目部署位置改变引发的路径错误问题</li>
</ul>
<blockquote>
<p>获取项目的上下文路径</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> servletContext.getContextPath();</span><br></pre></td></tr></table></figure>

<ul>
<li>项目的部署名称,也叫项目的上下文路径,在部署进入 tomcat 时所使用的路径,该路径是可能发生变化的,通过该 API 动态获取项目真实的上下文路径,可以<strong>帮助我们解决一些后端页面渲染技术或者请求转发和响应重定向中的路径问题</strong></li>
</ul>
<blockquote>
<p>域对象的相关 API</p>
</blockquote>
<ul>
<li>域对象: 一些用于存储数据和传递数据的对象,传递数据不同的范围,我们称之为不同的域,不同的域对象代表不同的域,共享数据的范围也不同</li>
<li>ServletContext 代表应用,所以 ServletContext 域也叫作应用域,是 webapp 中最大的域,可以在本应用内实现数据的共享和传递</li>
<li>webapp 中的三大域对象,分别是应用域,会话域,请求域</li>
<li><code>后续我们会将三大域对象统一进行讲解和演示</code>,三大域对象都具有的 API 如下</li>
</ul>
<table>
<thead>
<tr>
<th>API</th>
<th>功能解释</th>
</tr>
</thead>
<tbody><tr>
<td>void setAttribute(String key,Object value);</td>
<td>向域中存储&#x2F;修改数据</td>
</tr>
<tr>
<td>Object getAttribute(String key);</td>
<td>获得域中的数据</td>
</tr>
<tr>
<td>void removeAttribute(String key);</td>
<td>移除域中的数据</td>
</tr>
</tbody></table>
<h1 id="七-HttpServletRequest"><a href="#七-HttpServletRequest" class="headerlink" title="七 HttpServletRequest"></a>七 HttpServletRequest</h1><h2 id="7-1-HttpServletRequest-简介"><a href="#7-1-HttpServletRequest-简介" class="headerlink" title="7.1 HttpServletRequest 简介"></a>7.1 HttpServletRequest 简介</h2><blockquote>
<p>HttpServletRequest 是什么</p>
</blockquote>
<ul>
<li>HttpServletRequest 是一个接口,其父接口是 ServletRequest</li>
<li>HttpServletRequest 是 Tomcat 将请求报文转换封装而来的对象,在 Tomcat 调用 service 方法时传入</li>
<li>HttpServletRequest 代表客户端发来的请求,所有请求中的信息都可以通过该对象获得</li>
</ul>
<p><img src="/images/1681699577344.png" alt="1681699577344"></p>
<h2 id="7-2-HttpServletRequest-常见-API"><a href="#7-2-HttpServletRequest-常见-API" class="headerlink" title="7.2 HttpServletRequest 常见 API"></a>7.2 HttpServletRequest 常见 API</h2><blockquote>
<p>HttpServletRequest 怎么用</p>
</blockquote>
<ul>
<li>获取请求行信息相关(方式,请求的 url,协议及版本)</li>
</ul>
<table>
<thead>
<tr>
<th>API</th>
<th>功能解释</th>
</tr>
</thead>
<tbody><tr>
<td>StringBuffer getRequestURL();</td>
<td>获取客户端请求的 url</td>
</tr>
<tr>
<td>String getRequestURI();</td>
<td>获取客户端请求项目中的具体资源</td>
</tr>
<tr>
<td>int getServerPort();</td>
<td>获取客户端发送请求时的端口</td>
</tr>
<tr>
<td>int getLocalPort();</td>
<td>获取本应用在所在容器的端口</td>
</tr>
<tr>
<td>int getRemotePort();</td>
<td>获取客户端程序的端口</td>
</tr>
<tr>
<td>String getScheme();</td>
<td>获取请求协议</td>
</tr>
<tr>
<td>String getProtocol();</td>
<td>获取请求协议及版本号</td>
</tr>
<tr>
<td>String getMethod();</td>
<td>获取请求方式</td>
</tr>
</tbody></table>
<ul>
<li><p>获得请求头信息相关</p>
<table>
<thead>
<tr>
<th>API</th>
<th>功能解释</th>
</tr>
</thead>
<tbody><tr>
<td>String getHeader(String headerName);</td>
<td>根据头名称获取请求头</td>
</tr>
<tr>
<td>Enumeration<String> getHeaderNames();</String></td>
<td>获取所有的请求头名字</td>
</tr>
<tr>
<td>String getContentType();</td>
<td>获取 content-type 请求头</td>
</tr>
</tbody></table>
</li>
<li><p>获得请求参数相关</p>
<table>
<thead>
<tr>
<th>API</th>
<th>功能解释</th>
</tr>
</thead>
<tbody><tr>
<td>String getParameter(String parameterName);</td>
<td>根据请求参数名获取请求单个参数值</td>
</tr>
<tr>
<td>String[] getParameterValues(String parameterName);</td>
<td>根据请求参数名获取请求多个参数值数组</td>
</tr>
<tr>
<td>Enumeration<String> getParameterNames();</String></td>
<td>获取所有请求参数名</td>
</tr>
<tr>
<td>Map&lt;String, String[]&gt; getParameterMap();</td>
<td>获取所有请求参数的键值对集合</td>
</tr>
<tr>
<td>BufferedReader getReader() throws IOException;</td>
<td>获取读取请求体的字符输入流</td>
</tr>
<tr>
<td>ServletInputStream getInputStream() throws IOException;</td>
<td>获取读取请求体的字节输入流</td>
</tr>
<tr>
<td>int getContentLength();</td>
<td>获得请求体长度的字节数</td>
</tr>
</tbody></table>
</li>
<li><p>其他 API</p>
<table>
<thead>
<tr>
<th>API</th>
<th>功能解释</th>
</tr>
</thead>
<tbody><tr>
<td>String getServletPath();</td>
<td>获取请求的 Servlet 的映射路径</td>
</tr>
<tr>
<td>ServletContext getServletContext();</td>
<td>获取 ServletContext 对象</td>
</tr>
<tr>
<td>Cookie[] getCookies();</td>
<td>获取请求中的所有 cookie</td>
</tr>
<tr>
<td>HttpSession getSession();</td>
<td>获取 Session 对象</td>
</tr>
<tr>
<td>void setCharacterEncoding(String encoding) ;</td>
<td>设置请求体字符集</td>
</tr>
</tbody></table>
</li>
</ul>
<h1 id="八-HttpServletResponse"><a href="#八-HttpServletResponse" class="headerlink" title="八 HttpServletResponse"></a>八 HttpServletResponse</h1><h2 id="8-1-HttpServletResponse-简介"><a href="#8-1-HttpServletResponse-简介" class="headerlink" title="8.1 HttpServletResponse 简介"></a>8.1 HttpServletResponse 简介</h2><blockquote>
<p>HttpServletResponse 是什么</p>
</blockquote>
<ul>
<li>HttpServletResponse 是一个接口,其父接口是 ServletResponse</li>
<li>HttpServletResponse 是 Tomcat 预先创建的,在 Tomcat 调用 service 方法时传入</li>
<li>HttpServletResponse 代表对客户端的响应,该对象会被转换成响应的报文发送给客户端,通过该对象我们可以设置响应信息</li>
</ul>
<p><img src="/images/1681699577344.png" alt="1681699577344"></p>
<h2 id="8-2-HttpServletResponse-的常见-API"><a href="#8-2-HttpServletResponse-的常见-API" class="headerlink" title="8.2 HttpServletResponse 的常见 API"></a>8.2 HttpServletResponse 的常见 API</h2><blockquote>
<p>HttpServletRequest 怎么用</p>
</blockquote>
<ul>
<li>设置响应行相关</li>
</ul>
<table>
<thead>
<tr>
<th>API</th>
<th>功能解释</th>
</tr>
</thead>
<tbody><tr>
<td>void setStatus(int code);</td>
<td>设置响应状态码</td>
</tr>
</tbody></table>
<ul>
<li>设置响应头相关</li>
</ul>
<table>
<thead>
<tr>
<th>API</th>
<th>功能解释</th>
</tr>
</thead>
<tbody><tr>
<td>void setHeader(String headerName, String headerValue);</td>
<td>设置&#x2F;修改响应头键值对</td>
</tr>
<tr>
<td>void setContentType(String contentType);</td>
<td>设置 content-type 响应头及响应字符集(设置 MIME 类型)</td>
</tr>
</tbody></table>
<ul>
<li>设置响应体相关</li>
</ul>
<table>
<thead>
<tr>
<th>API</th>
<th>功能解释</th>
</tr>
</thead>
<tbody><tr>
<td>PrintWriter getWriter() throws IOException;</td>
<td>获得向响应体放入信息的字符输出流</td>
</tr>
<tr>
<td>ServletOutputStream getOutputStream() throws IOException;</td>
<td>获得向响应体放入信息的字节输出流</td>
</tr>
<tr>
<td>void setContentLength(int length);</td>
<td>设置响应体的字节长度,其实就是在设置 content-length 响应头</td>
</tr>
</tbody></table>
<ul>
<li>其他 API</li>
</ul>
<table>
<thead>
<tr>
<th>API</th>
<th>功能解释</th>
</tr>
</thead>
<tbody><tr>
<td>void sendError(int code, String message) throws IOException;</td>
<td>向客户端响应错误信息的方法,需要指定响应码和响应信息</td>
</tr>
<tr>
<td>void addCookie(Cookie cookie);</td>
<td>向响应体中增加 cookie</td>
</tr>
<tr>
<td>void setCharacterEncoding(String encoding);</td>
<td>设置响应体字符集</td>
</tr>
</tbody></table>
<blockquote>
<p>MIME 类型</p>
</blockquote>
<ul>
<li>MIME 类型,可以理解为文档类型,用户表示传递的数据是属于什么类型的文档</li>
<li>浏览器可以根据 MIME 类型决定该用什么样的方式解析接收到的响应体数据</li>
<li>可以这样理解: 前后端交互数据时,告诉对方发给对方的是 html&#x2F;css&#x2F;js&#x2F;图片&#x2F;声音&#x2F;视频&#x2F;… …</li>
<li>tomcat&#x2F;conf&#x2F;web.xml 中配置了常见文件的拓展名和 MIMIE 类型的对应关系</li>
<li>常见的 MIME 类型举例如下</li>
</ul>
<table>
<thead>
<tr>
<th>文件拓展名</th>
<th>MIME 类型</th>
</tr>
</thead>
<tbody><tr>
<td>.html</td>
<td>text&#x2F;html</td>
</tr>
<tr>
<td>.css</td>
<td>text&#x2F;css</td>
</tr>
<tr>
<td>.js</td>
<td>application&#x2F;javascript</td>
</tr>
<tr>
<td>.png &#x2F;.jpeg&#x2F;.jpg&#x2F;… …</td>
<td>image&#x2F;jpeg</td>
</tr>
<tr>
<td>.mp3&#x2F;.mpe&#x2F;.mpeg&#x2F; … …</td>
<td>audio&#x2F;mpeg</td>
</tr>
<tr>
<td>.mp4</td>
<td>video&#x2F;mp4</td>
</tr>
<tr>
<td>.m1v&#x2F;.m1v&#x2F;.m2v&#x2F;.mpe&#x2F;… …</td>
<td>video&#x2F;mpeg</td>
</tr>
</tbody></table>
<h1 id="九-请求转发和响应重定向"><a href="#九-请求转发和响应重定向" class="headerlink" title="九 请求转发和响应重定向"></a>九 请求转发和响应重定向</h1><h2 id="9-1-概述"><a href="#9-1-概述" class="headerlink" title="9.1 概述"></a>9.1 概述</h2><blockquote>
<p>什么是请求转发和响应重定向</p>
</blockquote>
<ul>
<li><p>请求转发和响应重定向是 web 应用中间接访问项目资源的两种手段,也是 Servlet 控制页面跳转的两种手段</p>
</li>
<li><p>请求转发通过 HttpServletRequest 实现,响应重定向通过 HttpServletResponse 实现</p>
</li>
<li><p>请求转发生活举例: 张三找李四借钱,李四没有,李四找王五,让王五借给张三</p>
</li>
<li><p>响应重定向生活举例:张三找李四借钱,李四没有,李四让张三去找王五,张三自己再去找王五借钱</p>
</li>
</ul>
<h2 id="9-2-请求转发"><a href="#9-2-请求转发" class="headerlink" title="9.2 请求转发"></a>9.2 请求转发</h2><blockquote>
<p>请求转发运行逻辑图</p>
</blockquote>
<p><img src="/images/1682321228643.png" alt="1682321228643"></p>
<blockquote>
<p>请求转发特点(背诵)</p>
</blockquote>
<ul>
<li>请求转发通过 HttpServletRequest 对象获取请求转发器实现</li>
<li>请求转发是服务器内部的行为,对客户端是屏蔽的</li>
<li>客户端只发送了一次请求,客户端地址栏不变</li>
<li>服务端只产生了一对请求和响应对象,这一对请求和响应对象会继续传递给下一个资源</li>
<li>因为全程只有一个 HttpServletRequset 对象,所以请求参数可以传递,请求域中的数据也可以传递</li>
<li>请求转发可以转发给其他 Servlet 动态资源,也可以转发给一些静态资源以实现页面跳转</li>
<li>请求转发可以转发给 WEB-INF 下受保护的资源</li>
<li>请求转发不能转发到本项目以外的外部资源</li>
</ul>
<blockquote>
<p>请求转发测试代码</p>
</blockquote>
<p><img src="/images/1682323740343.png" alt="1682323740343"></p>
<ul>
<li>ServletA</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/servletA&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletA</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//  获取请求转发器</span></span><br><span class="line">        <span class="comment">//  转发给servlet  ok</span></span><br><span class="line">        <span class="type">RequestDispatcher</span>  <span class="variable">requestDispatcher</span> <span class="operator">=</span> req.getRequestDispatcher(<span class="string">&quot;servletB&quot;</span>);</span><br><span class="line">        <span class="comment">//  转发给一个视图资源 ok</span></span><br><span class="line">        <span class="comment">//RequestDispatcher requestDispatcher = req.getRequestDispatcher(&quot;welcome.html&quot;);</span></span><br><span class="line">        <span class="comment">//  转发给WEB-INF下的资源  ok</span></span><br><span class="line">        <span class="comment">//RequestDispatcher requestDispatcher = req.getRequestDispatcher(&quot;WEB-INF/views/view1.html&quot;);</span></span><br><span class="line">        <span class="comment">//  转发给外部资源   no</span></span><br><span class="line">        <span class="comment">//RequestDispatcher requestDispatcher = req.getRequestDispatcher(&quot;http://www.atguigu.com&quot;);</span></span><br><span class="line">        <span class="comment">//  获取请求参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        System.out.println(username);</span><br><span class="line">        <span class="comment">//  向请求域中添加数据</span></span><br><span class="line">        req.setAttribute(<span class="string">&quot;reqKey&quot;</span>,<span class="string">&quot;requestMessage&quot;</span>);</span><br><span class="line">        <span class="comment">//  做出转发动作</span></span><br><span class="line">        requestDispatcher.forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ServletB</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/servletB&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletB</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 获取请求参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        System.out.println(username);</span><br><span class="line">        <span class="comment">// 获取请求域中的数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">reqMessage</span> <span class="operator">=</span> (String)req.getAttribute(<span class="string">&quot;reqKey&quot;</span>);</span><br><span class="line">        System.out.println(reqMessage);</span><br><span class="line">        <span class="comment">// 做出响应</span></span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;servletB response&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>打开浏览器,输入以下 url 测试</li>
</ul>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/web03_war_exploded/servletA?username=atguigu</span><br></pre></td></tr></table></figure>

<h2 id="9-3-响应重定向"><a href="#9-3-响应重定向" class="headerlink" title="9.3 响应重定向"></a>9.3 响应重定向</h2><blockquote>
<p>响应重定向运行逻辑图</p>
</blockquote>
<p><img src="/images/1682322460011.png" alt="1682322460011"></p>
<blockquote>
<p>响应重定向特点(背诵)</p>
</blockquote>
<ul>
<li>响应重定向通过 HttpServletResponse 对象的 sendRedirect 方法实现</li>
<li>响应重定向是服务端通过 302 响应码和路径,告诉客户端自己去找其他资源,是在服务端提示下的,客户端的行为</li>
<li>客户端至少发送了两次请求,客户端地址栏是要变化的</li>
<li>服务端产生了多对请求和响应对象,且请求和响应对象不会传递给下一个资源</li>
<li>因为全程产生了多个 HttpServletRequset 对象,所以请求参数不可以传递,请求域中的数据也不可以传递</li>
<li>重定向可以是其他 Servlet 动态资源,也可以是一些静态资源以实现页面跳转</li>
<li>重定向不可以到给 WEB-INF 下受保护的资源</li>
<li>重定向可以到本项目以外的外部资源</li>
</ul>
<blockquote>
<p>响应重定向测试代码</p>
</blockquote>
<p><img src="/images/1682323740343.png" alt="1682323740343"></p>
<ul>
<li>ServletA</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/servletA&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletA</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//  获取请求参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        System.out.println(username);</span><br><span class="line">        <span class="comment">//  向请求域中添加数据</span></span><br><span class="line">        req.setAttribute(<span class="string">&quot;reqKey&quot;</span>,<span class="string">&quot;requestMessage&quot;</span>);</span><br><span class="line">        <span class="comment">//  响应重定向</span></span><br><span class="line">        <span class="comment">// 重定向到servlet动态资源 OK</span></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;servletB&quot;</span>);</span><br><span class="line">        <span class="comment">// 重定向到视图静态资源 OK</span></span><br><span class="line">        <span class="comment">//resp.sendRedirect(&quot;welcome.html&quot;);</span></span><br><span class="line">        <span class="comment">// 重定向到WEB-INF下的资源 NO</span></span><br><span class="line">        <span class="comment">//resp.sendRedirect(&quot;WEB-INF/views/view1&quot;);</span></span><br><span class="line">        <span class="comment">// 重定向到外部资源</span></span><br><span class="line">        <span class="comment">//resp.sendRedirect(&quot;http://www.atguigu.com&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ServletB</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/servletB&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletB</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 获取请求参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        System.out.println(username);</span><br><span class="line">        <span class="comment">// 获取请求域中的数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">reqMessage</span> <span class="operator">=</span> (String)req.getAttribute(<span class="string">&quot;reqKey&quot;</span>);</span><br><span class="line">        System.out.println(reqMessage);</span><br><span class="line">        <span class="comment">// 做出响应</span></span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;servletB response&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>打开浏览器,输入以下 url 测试</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/web03_war_exploded/servletA?username=atguigu</span><br></pre></td></tr></table></figure>

<h1 id="十-web-乱码和路径问题总结"><a href="#十-web-乱码和路径问题总结" class="headerlink" title="十 web 乱码和路径问题总结"></a>十 web 乱码和路径问题总结</h1><h2 id="10-1-乱码问题"><a href="#10-1-乱码问题" class="headerlink" title="10.1 乱码问题"></a>10.1 乱码问题</h2><blockquote>
<p>乱码问题产生的根本原因是什么</p>
</blockquote>
<ol>
<li>数据的编码和解码使用的不是同一个字符集</li>
<li>使用了不支持某个语言文字的字符集</li>
</ol>
<blockquote>
<p>各个字符集的兼容性</p>
</blockquote>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682326867396.png" alt="1682326867396" style="zoom:80%;">

<ul>
<li>由上图得知,上述字符集都兼容了 ASCII</li>
<li>ASCII 中有什么? 英文字母和一些通常使用的符号,所以这些东西无论使用什么字符集都不会乱码</li>
</ul>
<h3 id="10-1-1-HTML-乱码问题"><a href="#10-1-1-HTML-乱码问题" class="headerlink" title="10.1.1 HTML 乱码问题"></a>10.1.1 HTML 乱码问题</h3><blockquote>
<p>设置项目文件的字符集要使用一个支持中文的字符集</p>
</blockquote>
<ul>
<li>查看当前文件的字符集</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682325817829.png" alt="1682325817829">

<ul>
<li>查看项目字符集 配置,将 Global Encoding 全局字符集,Project Encoding 项目字符集, Properties Files 属性配置文件字符集设置为 UTF-8</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682326229063.png" alt="1682326229063">

<blockquote>
<p>当前视图文件的字符集通过<meta charset="UTF-8"> 来告知浏览器通过什么字符集来解析当前文件</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    中文</span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="10-1-2-Tomcat-控制台乱码"><a href="#10-1-2-Tomcat-控制台乱码" class="headerlink" title="10.1.2 Tomcat 控制台乱码"></a>10.1.2 Tomcat 控制台乱码</h3><blockquote>
<p>在 tomcat10.1.7 这个版本中,修改 tomcat&#x2F;conf&#x2F;logging.properties 中,所有的 UTF-8 为 GBK 即可</p>
</blockquote>
<ul>
<li>修改前</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1681443202115.png" alt="1681443202115">

<ul>
<li>修改后</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1681443273573.png" alt="1681443273573">

<ul>
<li>重启测试</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1681443314432.png" alt="1681443314432">

<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682325615922.png" alt="1682325615922">

<blockquote>
<p>sout 乱码问题,设置 JVM 加载.class 文件时使用 UTF-8 字符集</p>
</blockquote>
<ul>
<li>设置虚拟机加载.class 文件的字符集和编译时使用的字符集一致</li>
</ul>
<p><img src="/images/1695189588009.png" alt="1695189588009"></p>
<h3 id="10-1-3-请求乱码问题"><a href="#10-1-3-请求乱码问题" class="headerlink" title="10.1.3 请求乱码问题"></a>10.1.3 请求乱码问题</h3><h4 id="10-1-3-1-GET-请求乱码"><a href="#10-1-3-1-GET-请求乱码" class="headerlink" title="10.1.3.1 GET 请求乱码"></a>10.1.3.1 GET 请求乱码</h4><blockquote>
<p>GET 请求方式乱码分析</p>
</blockquote>
<ul>
<li>GET 方式提交参数的方式是将参数放到 URL 后面,如果使用的不是 UTF-8,那么会对参数进行 URL 编码处理</li>
<li>HTML 中的 <meta charset="字符集"> 影响了 GET 方式提交参数的 URL 编码</li>
<li>tomcat10.1.7 的 URI 编码默认为 UTF-8</li>
<li>当 GET 方式提交的参数 URL 编码和 tomcat10.1.7 默认的 URI 编码不一致时,就会出现乱码</li>
</ul>
<blockquote>
<p>GET 请求方式乱码演示</p>
</blockquote>
<ul>
<li>浏览器解析的文档的<meta charset="GBK"></li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682385870660.png" alt="1682385870660" style="zoom: 67%;">

<ul>
<li>GET 方式提交时,会对数据进行 URL 编码处理 ,是将 GBK 转码为 “百分号码”</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682385997927.png" alt="1682385997927" style="zoom: 80%;">

<ul>
<li>tomcat10.1.7 默认使用 UTF-8 对 URI 进行解析,造成前后端使用的字符集不一致,出现乱码</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682386110151.png" alt="1682386110151" style="zoom: 80%;">

<blockquote>
<p>GET 请求方式乱码解决</p>
</blockquote>
<ul>
<li>方式 1 :设置 GET 方式提交的编码和 Tomcat10.1.7 的 URI 默认解析编码一致即可 (推荐)</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682386298048.png" alt="1682386298048" style="zoom: 75%;">

<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682386374464.png" alt="1682386374464" style="zoom:85%;">

<ul>
<li>方式 2 : 设置 Tomcat10.1.7 的 URI 解析字符集和 GET 请求发送时所使用 URL 转码时的字符集一致即可,修改 conf&#x2F;server.xml 中 Connecter 添加 URIEncoding&#x3D;”GBK” (不推荐)</li>
</ul>
<p><img src="/images/1682386551684.png" alt="1682386551684"></p>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682386611945.png" alt="1682386611945" style="zoom: 50%;">

<h4 id="10-1-3-2-POST-方式请求乱码"><a href="#10-1-3-2-POST-方式请求乱码" class="headerlink" title="10.1.3.2 POST 方式请求乱码"></a>10.1.3.2 POST 方式请求乱码</h4><blockquote>
<p>POST 请求方式乱码分析</p>
</blockquote>
<ul>
<li>POST 请求将参数放在请求体中进行发送</li>
<li>请求体使用的字符集受到了<meta charset="字符集"> 的影响</li>
<li>Tomcat10.1.7 默认使用 UTF-8 字符集对请求体进行解析</li>
<li>如果请求体的 URL 转码和 Tomcat 的请求体解析编码不一致,就容易出现乱码</li>
</ul>
<blockquote>
<p>POST 方式乱码演示</p>
</blockquote>
<ul>
<li>POST 请求请求体受到了<meta charset="字符集"> 的影响</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682387258428.png" alt="1682387258428" style="zoom:67%;">

<ul>
<li>请求体中,将 GBK 数据进行 URL 编码</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682387349916.png" alt="1682387349916" style="zoom: 85%;">

<ul>
<li>后端默认使用 UTF-8 解析请求体,出现字符集不一致,导致乱码</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682387412704.png" alt="1682387412704" style="zoom: 67%;">

<blockquote>
<p>POST 请求方式乱码解决</p>
</blockquote>
<ul>
<li>方式 1 : 请求时,使用 UTF-8 字符集提交请求体 (推荐)</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682387836615.png" alt="1682387836615" style="zoom: 67%;">

<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682387857587.png" alt="1682387857587" style="zoom:88%;">

<ul>
<li>方式 2 : 后端在获取参数前,设置解析请求体使用的字符集和请求发送时使用的字符集一致 (不推荐)</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682388026978.png" alt="1682388026978" style="zoom: 75%;">

<h3 id="10-1-3-响应乱码问题"><a href="#10-1-3-响应乱码问题" class="headerlink" title="10.1.3 响应乱码问题"></a>10.1.3 响应乱码问题</h3><blockquote>
<p>响应乱码分析</p>
</blockquote>
<ul>
<li>在 Tomcat10.1.7 中,向响应体中放入的数据默认使用了工程编码 UTF-8</li>
<li>浏览器在接收响应信息时,使用了不同的字符集或者是不支持中文的字符集就会出现乱码</li>
</ul>
<blockquote>
<p>响应乱码演示</p>
</blockquote>
<ul>
<li>服务端通过 response 对象向响应体添加数据</li>
</ul>
<p><img src="/images/1682388204239.png" alt="1682388204239"></p>
<ul>
<li>浏览器接收数据解析乱码</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682388599014.png" alt="1682388599014" style="zoom:80%;">

<blockquote>
<p>响应乱码解决</p>
</blockquote>
<ul>
<li><p>方式 1 : 手动设定浏览器对本次响应体解析时使用的字符集(不推荐)</p>
<ul>
<li>edge 和 chrome 浏览器没有提供直接的比较方便的入口,不方便</li>
</ul>
</li>
<li><p>方式 2: 后端通过设置响应体的字符集和浏览器解析响应体的默认字符集一致(不推荐)</p>
</li>
</ul>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682389063225.png" alt="1682389063225" style="zoom: 75%;">

<p>方式 3: 通过设置 content-type 响应头,告诉浏览器以指定的字符集解析响应体(推荐)</p>
<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682389263627.png" alt="1682389263627">

<img src="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/1682389317234.png" alt="1682389317234" style="zoom: 67%;">

<h2 id="10-2-路径问题"><a href="#10-2-路径问题" class="headerlink" title="10.2 路径问题"></a>10.2 路径问题</h2><blockquote>
<p>相对路径和绝对路径</p>
</blockquote>
<ul>
<li><p>相对路径</p>
<ul>
<li>相对路径的规则是: 以当前资源所在的路径为出发点去寻找目标资源</li>
<li>相对路径不以 &#x2F; 开头</li>
<li>在 file 协议下,使用的是磁盘路径</li>
<li>在 http 协议下,使用的是 url 路径</li>
<li>相对路径中可以使用 .&#x2F;表示当前资源所在路径,可以省略不写</li>
<li>相对路径中可以使用..&#x2F;表示当前资源所在路径的上一层路径,需要时要手动添加</li>
</ul>
</li>
<li><p>绝对路径</p>
<ul>
<li>绝对路径的规则是: 使用以一个固定的路径做出出发点去寻找目标资源,和当前资源所在的路径没有关系</li>
<li>绝对路径要以&#x2F; 开头</li>
<li>绝对路径的写法中,不以当前资源的所在路径为出发点,所以不会出现 .&#x2F; 和..&#x2F;</li>
<li>不同的项目和不同的协议下,绝对路径的基础位置可能不同,要通过测试确定</li>
<li>绝对路径的好处就是:无论当前资源位置在哪,寻找目标资源路径的写法都一致</li>
</ul>
</li>
<li><p>应用场景</p>
<ol>
<li>前端代码中,href src action 等属性</li>
<li>请求转发和重定向中的路径</li>
</ol>
</li>
</ul>
<h3 id="10-2-1-前端路径问题"><a href="#10-2-1-前端路径问题" class="headerlink" title="10.2.1 前端路径问题"></a>10.2.1 前端路径问题</h3><blockquote>
<p>前端项目结构</p>
</blockquote>
<p><img src="/images/1682390999417.png" alt="1682390999417"></p>
<h4 id="10-2-1-1-相对路径情况分析"><a href="#10-2-1-1-相对路径情况分析" class="headerlink" title="10.2.1.1 相对路径情况分析"></a>10.2.1.1 相对路径情况分析</h4><blockquote>
<p>相对路径情况 1:web&#x2F;index.html 中引入 web&#x2F;static&#x2F;img&#x2F;logo.png</p>
</blockquote>
<ul>
<li>访问 index.html 的 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/index.html">http://localhost:8080/web03_war_exploded/index.html</a></li>
<li>当前资源为 : index.html</li>
<li>当前资源的所在路径为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/">http://localhost:8080/web03_war_exploded/</a></li>
<li>要获取的目标资源 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/static/img/logo.png">http://localhost:8080/web03_war_exploded/static/img/logo.png</a></li>
<li>index.html 中定义的了 : <code>&lt;img src=&quot;static/img/logo.png&quot;/&gt;</code></li>
<li>寻找方式就是在当前资源所在路径(<a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/)%E5%90%8E%E6%8B%BC%E6%8E%A5">http://localhost:8080/web03_war_exploded/)后拼接</a> src 属性值(static&#x2F;img&#x2F;logo.png),正好是目标资源正常获取的 url(<a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/static/img/logo.png">http://localhost:8080/web03_war_exploded/static/img/logo.png</a>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;static/img/logo.png&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>相对路径情况 2:web&#x2F;a&#x2F;b&#x2F;c&#x2F;test.html 中引入 web&#x2F;static&#x2F;img&#x2F;logo.png</p>
</blockquote>
<ul>
<li>访问 test.html 的 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/a/b/c/test.html">http://localhost:8080/web03_war_exploded/a/b/c/test.html</a></li>
<li>当前资源为 : test.html</li>
<li>当前资源的所在路径为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/a/b/c/">http://localhost:8080/web03_war_exploded/a/b/c/</a></li>
<li>要获取的目标资源 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/static/img/logo.png">http://localhost:8080/web03_war_exploded/static/img/logo.png</a></li>
<li>test.html 中定义的了 : <code>&lt;img src=&quot;../../../static/img/logo.png&quot;/&gt;</code></li>
<li>寻找方式就是在当前资源所在路径(<a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/a/b/c/)%E5%90%8E%E6%8B%BC%E6%8E%A5">http://localhost:8080/web03_war_exploded/a/b/c/)后拼接</a> src 属性值(..&#x2F;..&#x2F;..&#x2F;static&#x2F;img&#x2F;logo.png),其中 ..&#x2F;可以抵消一层路径,正好是目标资源正常获取的 url(<a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/static/img/logo.png">http://localhost:8080/web03_war_exploded/static/img/logo.png</a>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ../代表上一层路径 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../../static/img/logo.png&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>相对路径情况 3:web&#x2F;WEB-INF&#x2F;views&#x2F;view1.html 中引入 web&#x2F;static&#x2F;img&#x2F;logo.png</p>
</blockquote>
<ul>
<li>view1.html 在 WEB-INF 下,需要通过 Servlet 请求转发获得</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/view1Servlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">View1Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">RequestDispatcher</span> <span class="variable">requestDispatcher</span> <span class="operator">=</span> req.getRequestDispatcher(<span class="string">&quot;WEB-INF/views/view1.html&quot;</span>);</span><br><span class="line">        requestDispatcher.forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>访问 view1.html 的 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/view1Servlet">http://localhost:8080/web03_war_exploded/view1Servlet</a></li>
<li>当前资源为 : view1Servlet</li>
<li>当前资源的所在路径为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/">http://localhost:8080/web03_war_exploded/</a></li>
<li>要获取的目标资源 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/static/img/logo.png">http://localhost:8080/web03_war_exploded/static/img/logo.png</a></li>
<li>view1.html 中定义的了 : <code>&lt;img src=&quot;static/img/logo.png&quot;/&gt;</code></li>
<li>寻找方式就是在当前资源所在路径(<a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/)%E5%90%8E%E6%8B%BC%E6%8E%A5">http://localhost:8080/web03_war_exploded/)后拼接</a> src 属性值(static&#x2F;img&#x2F;logo.png),正好是目标资源正常获取的 url(<a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/static/img/logo.png">http://localhost:8080/web03_war_exploded/static/img/logo.png</a>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;static/img/logo.png&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="10-2-1-2-绝对路径情况分析"><a href="#10-2-1-2-绝对路径情况分析" class="headerlink" title="10.2.1.2 绝对路径情况分析"></a>10.2.1.2 绝对路径情况分析</h4><blockquote>
<p>绝对路径情况 1:web&#x2F;index.html 中引入 web&#x2F;static&#x2F;img&#x2F;logo.png</p>
</blockquote>
<ul>
<li>访问 index.html 的 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/index.html">http://localhost:8080/web03_war_exploded/index.html</a></li>
<li>绝对路径的基准路径为 : <a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080</a></li>
<li>要获取的目标资源 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/static/img/logo.png">http://localhost:8080/web03_war_exploded/static/img/logo.png</a></li>
<li>index.html 中定义的了 : <code>&lt;img src=&quot;/web03_war_exploded/static/img/logo.png&quot;/&gt;</code></li>
<li>寻找方式就是在基准路径(<a href="http://localhost:8080)后面拼接">http://localhost:8080)后面拼接</a> src 属性值(&#x2F;web03_war_exploded&#x2F;static&#x2F;img&#x2F;logo.png),得到的正是目标资源访问的正确路径</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 绝对路径写法 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/web03_war_exploded/static/img/logo.png&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>绝对路径情况 2:web&#x2F;a&#x2F;b&#x2F;c&#x2F;test.html 中引入 web&#x2F;static&#x2F;img&#x2F;logo.png</p>
</blockquote>
<ul>
<li>访问 test.html 的 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/a/b/c/test.html">http://localhost:8080/web03_war_exploded/a/b/c/test.html</a></li>
<li>绝对路径的基准路径为 : <a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080</a></li>
<li>要获取的目标资源 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/static/img/logo.png">http://localhost:8080/web03_war_exploded/static/img/logo.png</a></li>
<li>test.html 中定义的了 : <code>&lt;img src=&quot;/web03_war_exploded/static/img/logo.png&quot;/&gt;</code></li>
<li>寻找方式就是在基准路径(<a href="http://localhost:8080)后面拼接">http://localhost:8080)后面拼接</a> src 属性值(&#x2F;web03_war_exploded&#x2F;static&#x2F;img&#x2F;logo.png),得到的正是目标资源访问的正确路径</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 绝对路径写法 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/web03_war_exploded/static/img/logo.png&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>绝对路径情况 3:web&#x2F;WEB-INF&#x2F;views&#x2F;view1.html 中引入 web&#x2F;static&#x2F;img&#x2F;logo.png</p>
</blockquote>
<ul>
<li>view1.html 在 WEB-INF 下,需要通过 Servlet 请求转发获得</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/view1Servlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">View1Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">RequestDispatcher</span> <span class="variable">requestDispatcher</span> <span class="operator">=</span> req.getRequestDispatcher(<span class="string">&quot;WEB-INF/views/view1.html&quot;</span>);</span><br><span class="line">        requestDispatcher.forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>访问 view1.html 的 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/view1Servlet">http://localhost:8080/web03_war_exploded/view1Servlet</a></li>
<li>绝对路径的基准路径为 : <a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080</a></li>
<li>要获取的目标资源 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/static/img/logo.png">http://localhost:8080/web03_war_exploded/static/img/logo.png</a></li>
<li>view1.html 中定义的了 : <code>&lt;img src=&quot;/web03_war_exploded/static/img/logo.png&quot;/&gt;</code></li>
<li>寻找方式就是在基准路径(<a href="http://localhost:8080)后面拼接">http://localhost:8080)后面拼接</a> src 属性值(&#x2F;static&#x2F;img&#x2F;logo.png),得到的正是目标资源访问的正确路径</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/web03_war_exploded/static/img/logo.png&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="10-2-1-3-base-标签的使用"><a href="#10-2-1-3-base-标签的使用" class="headerlink" title="10.2.1.3 base 标签的使用"></a>10.2.1.3 base 标签的使用</h4><blockquote>
<p>base 标签定义页面相对路径公共前缀</p>
</blockquote>
<ul>
<li>base 标签定义在 head 标签中,用于定义相对路径的公共前缀</li>
<li>base 标签定义的公共前缀只在相对路径上有效,绝对路径中无效</li>
<li>如果相对路径开头有 .&#x2F; 或者..&#x2F;修饰,则 base 标签对该路径同样无效</li>
</ul>
<blockquote>
<p>index.html 和 a&#x2F;b&#x2F;c&#x2F;test.html 以及 view1Servlet 中的路径处理</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--定义相对路径的公共前缀,将相对路径转化成了绝对路径--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base</span> <span class="attr">href</span>=<span class="string">&quot;/web03_war_exploded/&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;static/img/logo.png&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="10-2-1-4-缺省项目上下文路径"><a href="#10-2-1-4-缺省项目上下文路径" class="headerlink" title="10.2.1.4 缺省项目上下文路径"></a>10.2.1.4 缺省项目上下文路径</h4><blockquote>
<p>项目上下文路径变化问题</p>
</blockquote>
<ul>
<li>通过 base 标签虽然解决了相对路径转绝对路径问题,但是 base 中定义的是项目的上下文路径</li>
<li>项目的上下文路径是可以随意变化的</li>
<li>一旦项目的上下文路径发生变化,所有 base 标签中的路径都需要改</li>
</ul>
<blockquote>
<p>解决方案</p>
</blockquote>
<ul>
<li>将项目的上下文路径进行缺省设置,设置为 &#x2F;,所有的绝对路径中就不必填写项目的上下文了,直接就是&#x2F;开头即可</li>
</ul>
<h3 id="10-2-2-重定向中的路径问题"><a href="#10-2-2-重定向中的路径问题" class="headerlink" title="10.2.2 重定向中的路径问题"></a>10.2.2 重定向中的路径问题</h3><blockquote>
<p>目标 :由&#x2F;x&#x2F;y&#x2F;z&#x2F;servletA 重定向到 a&#x2F;b&#x2F;c&#x2F;test.html</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/x/y/z/servletA&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletA</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="10-2-2-1-相对路径写法"><a href="#10-2-2-1-相对路径写法" class="headerlink" title="10.2.2.1 相对路径写法"></a>10.2.2.1 相对路径写法</h4><ul>
<li>访问 ServletA 的 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/x/y/z/servletA">http://localhost:8080/web03_war_exploded/x/y/z/servletA</a></li>
<li>当前资源为 : servletA</li>
<li>当前资源的所在路径为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/x/x/z/">http://localhost:8080/web03_war_exploded/x/x/z/</a></li>
<li>要获取的目标资源 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/a/b/c/test.html">http://localhost:8080/web03_war_exploded/a/b/c/test.html</a></li>
<li>ServletA 重定向的路径 : ..&#x2F;..&#x2F;..&#x2F;a&#x2F;b&#x2F;c&#x2F;test&#x2F;html</li>
<li>寻找方式就是在当前资源所在路径(<a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/x/y/a/b/c/test/html),%E5%BD%A2%E6%88%90(http://localhost:8080/web03_war_exploded/a/b/c/test/html)%E6%AF%8F%E4%B8%AA../%E6%8A%B5%E6%B6%88%E4%B8%80%E5%B1%82%E7%9B%AE%E5%BD%95,%E6%AD%A3%E5%A5%BD%E6%98%AF%E7%9B%AE%E6%A0%87%E8%B5%84%E6%BA%90%E6%AD%A3%E5%B8%B8%E8%8E%B7%E5%8F%96%E7%9A%84">http://localhost:8080/web03_war_exploded/x/y/z/)后拼接(../../../a/b/c/test/html),形成(http://localhost:8080/web03_war_exploded/x/y/z/../../../a/b/c/test/html)每个../抵消一层目录,正好是目标资源正常获取的</a> url(<a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/a/b/c/test/html">http://localhost:8080/web03_war_exploded/a/b/c/test/html</a>)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/x/y/z/servletA&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletA</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 相对路径重定向到test.html</span></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;../../../a/b/c/test.html&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-2-2-2-绝对路径写法"><a href="#10-2-2-2-绝对路径写法" class="headerlink" title="10.2.2.2 绝对路径写法"></a>10.2.2.2 绝对路径写法</h4><ul>
<li><p>访问 ServletA 的 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/x/y/z/servletA">http://localhost:8080/web03_war_exploded/x/y/z/servletA</a></p>
</li>
<li><p>绝对路径的基准路径为 : <a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080</a></p>
</li>
<li><p>要获取的目标资源 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/a/b/c/test.html">http://localhost:8080/web03_war_exploded/a/b/c/test.html</a></p>
</li>
<li><p>ServletA 重定向的路径 : &#x2F;web03_war_exploded&#x2F;a&#x2F;b&#x2F;c&#x2F;test.html</p>
</li>
<li><p>寻找方式就是在基准路径(<a href="http://localhost:8080)后面拼接(/web03_war_exploded/a/b/c/test.html),得到">http://localhost:8080)后面拼接(/web03_war_exploded/a/b/c/test.html),得到</a>( <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/a/b/c/test.html)%E6%AD%A3%E6%98%AF%E7%9B%AE%E6%A0%87%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E7%9A%84%E6%AD%A3%E7%A1%AE%E8%B7%AF%E5%BE%84">http://localhost:8080/web03_war_exploded/a/b/c/test.html)正是目标资源访问的正确路径</a></p>
</li>
<li><p>绝对路径中需要填写项目上下文路径,但是上下文路径是变换的</p>
<ul>
<li>可以通过 ServletContext 的 getContextPath()获取上下文路径</li>
<li>可以将项目上下文路径定义为 &#x2F; 缺省路径,那么路径中直接以&#x2F;开头即可</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//绝对路径中,要写项目上下文路径</span></span><br><span class="line"><span class="comment">//resp.sendRedirect(&quot;/web03_war_exploded/a/b/c/test.html&quot;);</span></span><br><span class="line"><span class="comment">// 通过ServletContext对象动态获取项目上下文路径</span></span><br><span class="line"><span class="comment">//resp.sendRedirect(getServletContext().getContextPath()+&quot;/a/b/c/test.html&quot;);</span></span><br><span class="line"><span class="comment">// 缺省项目上下文路径时,直接以/开头即可</span></span><br><span class="line">resp.sendRedirect(<span class="string">&quot;/a/b/c/test.html&quot;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="10-2-3-请求转发中的路径问题"><a href="#10-2-3-请求转发中的路径问题" class="headerlink" title="10.2.3 请求转发中的路径问题"></a>10.2.3 请求转发中的路径问题</h3><blockquote>
<p>目标 :由 x&#x2F;y&#x2F;servletB 请求转发到 a&#x2F;b&#x2F;c&#x2F;test.html</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/x/y/servletB&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletB</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-2-3-1-相对路径写法"><a href="#10-2-3-1-相对路径写法" class="headerlink" title="10.2.3.1 相对路径写法"></a>10.2.3.1 相对路径写法</h4><ul>
<li><p>访问 ServletB 的 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/x/y/servletB">http://localhost:8080/web03_war_exploded/x/y/servletB</a></p>
</li>
<li><p>当前资源为 : servletB</p>
</li>
<li><p>当前资源的所在路径为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/x/x/">http://localhost:8080/web03_war_exploded/x/x/</a></p>
</li>
<li><p>要获取的目标资源 url 为 : <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/a/b/c/test.html">http://localhost:8080/web03_war_exploded/a/b/c/test.html</a></p>
</li>
<li><p>ServletA 请求转发路径 : ..&#x2F;..&#x2F;a&#x2F;b&#x2F;c&#x2F;test&#x2F;html</p>
</li>
<li><p>寻找方式就是在当前资源所在路径(<a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/x/y/a/b/c/test/html),%E5%BD%A2%E6%88%90(http://localhost:8080/web03_war_exploded/a/b/c/test/html)%E6%AF%8F%E4%B8%AA../%E6%8A%B5%E6%B6%88%E4%B8%80%E5%B1%82%E7%9B%AE%E5%BD%95,%E6%AD%A3%E5%A5%BD%E6%98%AF%E7%9B%AE%E6%A0%87%E8%B5%84%E6%BA%90%E6%AD%A3%E5%B8%B8%E8%8E%B7%E5%8F%96%E7%9A%84">http://localhost:8080/web03_war_exploded/x/y/)后拼接(../../a/b/c/test/html),形成(http://localhost:8080/web03_war_exploded/x/y/../../a/b/c/test/html)每个../抵消一层目录,正好是目标资源正常获取的</a> url(<a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/a/b/c/test/html">http://localhost:8080/web03_war_exploded/a/b/c/test/html</a>)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/x/y/servletB&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletB</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">RequestDispatcher</span> <span class="variable">requestDispatcher</span> <span class="operator">=</span> req.getRequestDispatcher(<span class="string">&quot;../../a/b/c/test.html&quot;</span>);</span><br><span class="line">        requestDispatcher.forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="10-2-3-2-绝对路径写法"><a href="#10-2-3-2-绝对路径写法" class="headerlink" title="10.2.3.2 绝对路径写法"></a>10.2.3.2 绝对路径写法</h4><ul>
<li><p>请求转发只能转发到项目内部的资源,其绝对路径无需添加项目上下文路径</p>
</li>
<li><p>请求转发绝对路径的基准路径相当于 <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded">http://localhost:8080/web03_war_exploded</a></p>
</li>
<li><p>在项目上下文路径为缺省值时,也无需改变,直接以&#x2F;开头即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/x/y/servletB&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletB</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">RequestDispatcher</span> <span class="variable">requestDispatcher</span> <span class="operator">=</span> req.getRequestDispatcher(<span class="string">&quot;/a/b/c/test.html&quot;</span>);</span><br><span class="line">        requestDispatcher.forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="10-2-3-3-目标资源内相对路径处理"><a href="#10-2-3-3-目标资源内相对路径处理" class="headerlink" title="10.2.3.3 目标资源内相对路径处理"></a>10.2.3.3 目标资源内相对路径处理</h4><ul>
<li><p>此时需要注意,请求转发是服务器行为,浏览器不知道,地址栏不变化,相当于我们访问 test.html 的路径为 <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/x/y/servletB">http://localhost:8080/web03_war_exploded/x/y/servletB</a></p>
</li>
<li><p>那么此时 test.html 资源的所在路径就是 <a target="_blank" rel="noopener" href="http://localhost:8080/web03_war_exploded/x/y/%E6%89%80%E4%BB%A5">http://localhost:8080/web03_war_exploded/x/y/所以</a> test.html 中相对路径要基于该路径编写,如果使用绝对路径则不用考虑</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">		当前资源路径是     http://localhost:8080/web03_war_exploded/x/y/servletB</span></span><br><span class="line"><span class="comment">        当前资源所在路径是  http://localhost:8080/web03_war_exploded/x/y/</span></span><br><span class="line"><span class="comment">        目标资源路径=所在资源路径+src属性值 </span></span><br><span class="line"><span class="comment">		http://localhost:8080/web03_war_exploded/x/y/../../static/img/logo.png</span></span><br><span class="line"><span class="comment">        http://localhost:8080/web03_war_exploded/static/img/logo.png</span></span><br><span class="line"><span class="comment">		得到目标路径正是目标资源的访问路径	</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../static/img/logo.png&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="十一-MVC-架构模式"><a href="#十一-MVC-架构模式" class="headerlink" title="十一 MVC 架构模式"></a>十一 MVC 架构模式</h1><blockquote>
<p>MVC（Model View Controller）是软件工程中的一种**<code>软件架构模式</code><strong>，它把软件系统分为</strong><code>模型</code><strong>、</strong><code>视图</code><strong>和</strong><code>控制器</code>**三个基本部分。用一种业务逻辑、数据、界面显示分离的方法组织代码，将业务逻辑聚集到一个部件里面，在改进和个性化定制界面及用户交互的同时，不需要重新编写业务逻辑。</p>
</blockquote>
<ul>
<li><p><strong>M</strong>：Model 模型层,具体功能如下</p>
<ol>
<li>存放和数据库对象的实体类以及一些用于存储非数据库表完整相关的 VO 对象</li>
<li>存放一些对数据进行逻辑运算操作的的一些业务处理代码</li>
</ol>
</li>
<li><p><strong>V</strong>：View 视图层,具体功能如下</p>
<ol>
<li>存放一些视图文件相关的代码 html css js 等</li>
<li>在前后端分离的项目中,后端已经没有视图文件,该层次已经衍化成独立的前端项目</li>
</ol>
</li>
<li><p><strong>C</strong>：Controller 控制层,具体功能如下</p>
<ol>
<li>接收客户端请求,获得请求数据</li>
<li>将准备好的数据响应给客户端</li>
</ol>
</li>
</ul>
<blockquote>
<p>MVC 模式下,项目中的常见包</p>
</blockquote>
<ul>
<li><p>M:</p>
<ol>
<li>实体类包(pojo &#x2F;entity &#x2F;bean) 专门存放和数据库对应的实体类和一些 VO 对象</li>
<li>数据库访问包(dao&#x2F;mapper) 专门存放对数据库不同表格 CURD 方法封装的一些类</li>
<li>服务包(service) 专门存放对数据进行业务逻辑运算的一些类</li>
</ol>
</li>
<li><p>C:</p>
<ol>
<li>控制层包(controller)</li>
</ol>
</li>
<li><p>V:</p>
<ol>
<li>web 目录下的视图资源 html css js img 等</li>
<li>前端工程化后,在后端项目中已经不存在了</li>
</ol>
</li>
</ul>
<p>非前后端分离的 MVC</p>
<p><img src="/images/1690349913931.png" alt="1690349913931"></p>
<p>前后端分离的 MVC</p>
<p><img src="/images/1683363039636-1690349401673.png" alt="1683363039636"></p>
<h1 id="十二-案例开发-日程管理-第二期"><a href="#十二-案例开发-日程管理-第二期" class="headerlink" title="十二 案例开发-日程管理-第二期"></a>十二 案例开发-日程管理-第二期</h1><h2 id="12-1-项目搭建"><a href="#12-1-项目搭建" class="headerlink" title="12.1 项目搭建"></a>12.1 项目搭建</h2><h3 id="12-1-1-数据库准备"><a href="#12-1-1-数据库准备" class="headerlink" title="12.1.1 数据库准备"></a>12.1.1 数据库准备</h3><ul>
<li>创建 schedule_system 数据库并执行如下语句</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- 创建日程表</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `sys_schedule`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `sys_schedule`  (</span><br><span class="line">  `sid` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `uid` <span class="type">int</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `title` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `completed` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`sid`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB AUTO_INCREMENT <span class="operator">=</span> <span class="number">1</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8mb4 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8mb4_0900_ai_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- 插入日程数据</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- 创建用户表</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `sys_user`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `sys_user`  (</span><br><span class="line">  `uid` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">10</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `user_pwd` <span class="type">varchar</span>(<span class="number">100</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`uid`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">UNIQUE</span> INDEX `username`(`username`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8mb4 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8mb4_0900_ai_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- 插入用户数据</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `sys_user` <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;zhangsan&#x27;</span>, <span class="string">&#x27;e10adc3949ba59abbe56e057f20f883e&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `sys_user` <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;lisi&#x27;</span>, <span class="string">&#x27;e10adc3949ba59abbe56e057f20f883e&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>获得如下表格</li>
</ul>
<p><img src="/images/1690362496438.png" alt="1690362496438"></p>
<p><img src="/images/1690362518448.png" alt="1690362518448"></p>
<h3 id="12-1-2-项目结构"><a href="#12-1-2-项目结构" class="headerlink" title="12.1.2 项目结构"></a>12.1.2 项目结构</h3><p><img src="/images/1690362672386.png" alt="1690362672386"></p>
<p><img src="/images/1690362709902.png" alt="1690362709902"></p>
<h3 id="12-1-3-导入依赖"><a href="#12-1-3-导入依赖" class="headerlink" title="12.1.3 导入依赖"></a>12.1.3 导入依赖</h3><p><img src="/images/1690362787035.png" alt="1690362787035"></p>
<h3 id="12-1-4-pojo-包处理"><a href="#12-1-4-pojo-包处理" class="headerlink" title="12.1.4 pojo 包处理"></a>12.1.4 pojo 包处理</h3><blockquote>
<p>使用 lombok 处理 getter setter equals hashcode 构造器</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//-----------------------------------------------------</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.schedule.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysUser</span>  <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String userPwd;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//------------------------------------------------------</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.schedule.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysSchedule</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer sid;</span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> Integer completed;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//------------------------------------------------------</span></span><br></pre></td></tr></table></figure>

<h3 id="12-1-5-dao-包处理"><a href="#12-1-5-dao-包处理" class="headerlink" title="12.1.5 dao 包处理"></a>12.1.5 dao 包处理</h3><p>导入 JDBCUtil 连接池工具类并准备 jdbc.properties 配置文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.util;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSourceFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ThreadLocal&lt;Connection&gt; threadLocal =<span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource dataSource;</span><br><span class="line">    <span class="comment">// 初始化连接池</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="comment">// 可以帮助我们读取.properties配置文件</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> JDBCUtil.class.getClassLoader().getResourceAsStream(<span class="string">&quot;jdbc.properties&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            properties.load(resourceAsStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            dataSource = DruidDataSourceFactory.createDataSource(properties);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*1 向外提供连接池的方法*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> DataSource <span class="title function_">getDataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*2 向外提供连接的方法*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> threadLocal.get();</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == connection) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection = dataSource.getConnection();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">            threadLocal.set(connection);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> connection;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*定义一个归还连接的方法 (解除和ThreadLocal之间的关联关系) */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">releaseConnection</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> threadLocal.get();</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != connection) &#123;</span><br><span class="line">            threadLocal.remove();</span><br><span class="line">            <span class="comment">// 把连接设置回自动提交的连接</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.setAutoCommit(<span class="literal">true</span>);</span><br><span class="line">                <span class="comment">// 自动归还到连接池</span></span><br><span class="line">                connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driverClassName</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/schedule_system</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">initialSize</span>=<span class="string">5</span></span><br><span class="line"><span class="attr">maxActive</span>=<span class="string">10</span></span><br><span class="line"><span class="attr">maxWait</span>=<span class="string">1000</span></span><br></pre></td></tr></table></figure>

<ul>
<li>创建 BaseDao 对象并复制如下代码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.dao;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.util.JDBCUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseDao</span> &#123;</span><br><span class="line">    <span class="comment">// 公共的查询方法  返回的是单个对象</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; T <span class="title function_">baseQueryObject</span><span class="params">(Class&lt;T&gt; clazz, String sql, Object ... args)</span> &#123;</span><br><span class="line">        <span class="type">T</span> <span class="variable">t</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JDBCUtil.getConnection();</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">rows</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 准备语句对象</span></span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// 设置语句上的参数</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; args.length; i++) &#123;</span><br><span class="line">                preparedStatement.setObject(i + <span class="number">1</span>, args[i]);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 执行 查询</span></span><br><span class="line">            resultSet = preparedStatement.executeQuery();</span><br><span class="line">            <span class="keyword">if</span> (resultSet.next()) &#123;</span><br><span class="line">                t = (T) resultSet.getObject(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != resultSet) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    resultSet.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != preparedStatement) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    preparedStatement.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            JDBCUtil.releaseConnection();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 公共的查询方法  返回的是对象的集合</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">baseQuery</span><span class="params">(Class clazz, String sql, Object ... args)</span>&#123;</span><br><span class="line">        List&lt;T&gt; list =<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JDBCUtil.getConnection();</span><br><span class="line">        PreparedStatement preparedStatement=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span><span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">rows</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 准备语句对象</span></span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// 设置语句上的参数</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; args.length; i++) &#123;</span><br><span class="line">                preparedStatement.setObject(i+<span class="number">1</span>,args[i]);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 执行 查询</span></span><br><span class="line">            resultSet = preparedStatement.executeQuery();</span><br><span class="line"></span><br><span class="line">            <span class="type">ResultSetMetaData</span> <span class="variable">metaData</span> <span class="operator">=</span> resultSet.getMetaData();</span><br><span class="line">            <span class="type">int</span> <span class="variable">columnCount</span> <span class="operator">=</span> metaData.getColumnCount();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 将结果集通过反射封装成实体类对象</span></span><br><span class="line">            <span class="keyword">while</span> (resultSet.next()) &#123;</span><br><span class="line">                <span class="comment">// 使用反射实例化对象</span></span><br><span class="line">                <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span>clazz.getDeclaredConstructor().newInstance();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= columnCount; i++) &#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">columnName</span> <span class="operator">=</span> metaData.getColumnLabel(i);</span><br><span class="line">                    <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> resultSet.getObject(columnName);</span><br><span class="line">                    <span class="comment">// 处理datetime类型字段和java.util.Data转换问题</span></span><br><span class="line">                    <span class="keyword">if</span>(value.getClass().equals(LocalDateTime.class))&#123;</span><br><span class="line">                        value= Timestamp.valueOf((LocalDateTime) value);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> clazz.getDeclaredField(columnName);</span><br><span class="line">                    field.setAccessible(<span class="literal">true</span>);</span><br><span class="line">                    field.set(obj,value);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                list.add((T)obj);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> !=resultSet) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    resultSet.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != preparedStatement) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    preparedStatement.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            JDBCUtil.releaseConnection();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通用的增删改方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">baseUpdate</span><span class="params">(String sql,Object ... args)</span> &#123;</span><br><span class="line">        <span class="comment">// 获取连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JDBCUtil.getConnection();</span><br><span class="line">        PreparedStatement preparedStatement=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">rows</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 准备语句对象</span></span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// 设置语句上的参数</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; args.length; i++) &#123;</span><br><span class="line">                preparedStatement.setObject(i+<span class="number">1</span>,args[i]);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 执行 增删改 executeUpdate</span></span><br><span class="line">            rows = preparedStatement.executeUpdate();</span><br><span class="line">            <span class="comment">// 释放资源(可选)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != preparedStatement) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    preparedStatement.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            JDBCUtil.releaseConnection();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 返回的是影响数据库记录数</span></span><br><span class="line">        <span class="keyword">return</span> rows;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>dao 层所有接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//---------------------------------------------------</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.schedule.dao;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SysUserDao</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//---------------------------------------------------</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.schedule.dao;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SysScheduleDao</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//---------------------------------------------------</span></span><br></pre></td></tr></table></figure>

<ul>
<li>dao 层所有实现类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------------------------------------------------------------------------------</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.schedule.dao.impl;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.dao.BaseDao;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.dao.SysUserDao;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysUserDaoImpl</span> <span class="keyword">extends</span> <span class="title class_">BaseDao</span> <span class="keyword">implements</span> <span class="title class_">SysUserDao</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//------------------------------------------------------------------------------</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.schedule.dao.impl;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.dao.BaseDao;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.dao.SysScheduleDao;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysScheduleDaoImpl</span> <span class="keyword">extends</span> <span class="title class_">BaseDao</span> <span class="keyword">implements</span> <span class="title class_">SysScheduleDao</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//------------------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure>

<h3 id="12-1-6-service-包处理"><a href="#12-1-6-service-包处理" class="headerlink" title="12.1.6 service 包处理"></a>12.1.6 service 包处理</h3><ul>
<li>接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------------------------------------------------------------------------------</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.schedule.service;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SysUserService</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//------------------------------------------------------------------------------</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.schedule.service;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SysScheduleService</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//------------------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure>

<ul>
<li>实现类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------------------------------------------------------------------------------</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.schedule.service.impl;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.service.SysUserService;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysUserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">SysUserService</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//------------------------------------------------------------------------------</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.schedule.service.impl;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.service.SysScheduleService;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysScheduleServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">SysScheduleService</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//------------------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure>

<h3 id="12-1-7-controller-包处理"><a href="#12-1-7-controller-包处理" class="headerlink" title="12.1.7 controller 包处理"></a>12.1.7 controller 包处理</h3><ul>
<li>BaseController 处理请求路径问题</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseController</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">requestURI</span> <span class="operator">=</span> req.getRequestURI();</span><br><span class="line">        String[] split = requestURI.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span>split[split.length-<span class="number">1</span>];</span><br><span class="line">        <span class="comment">// 通过反射获取要执行的方法</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Method method=clazz.getDeclaredMethod(methodName,HttpServletRequest.class,HttpServletResponse.class);</span><br><span class="line">            <span class="comment">// 设置方法可以访问</span></span><br><span class="line">            method.setAccessible(<span class="literal">true</span>);</span><br><span class="line">            <span class="comment">// 通过反射执行代码</span></span><br><span class="line">            method.invoke(<span class="built_in">this</span>,req,resp);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>多个处理器继承 BaseController</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//----------------------------------------------------------------------------</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.schedule.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/user/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> <span class="keyword">extends</span> <span class="title class_">BaseController</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//----------------------------------------------------------------------------</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.schedule.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/schedule/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysScheduleController</span>  <span class="keyword">extends</span> <span class="title class_">BaseController</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//----------------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure>

<h3 id="12-1-8-加密工具类的使用"><a href="#12-1-8-加密工具类的使用" class="headerlink" title="12.1.8 加密工具类的使用"></a>12.1.8 加密工具类的使用</h3><ul>
<li>导入 MD5Util 工具类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.util;</span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">MD5Util</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">encrypt</span><span class="params">(String strSrc)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">char</span> hexChars[] = &#123; <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span> &#125;;</span><br><span class="line">            <span class="type">byte</span>[] bytes = strSrc.getBytes();</span><br><span class="line">            <span class="type">MessageDigest</span> <span class="variable">md</span> <span class="operator">=</span> MessageDigest.getInstance(<span class="string">&quot;MD5&quot;</span>);</span><br><span class="line">            md.update(bytes);</span><br><span class="line">            bytes = md.digest();</span><br><span class="line">            <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> bytes.length;</span><br><span class="line">            <span class="type">char</span>[] chars = <span class="keyword">new</span> <span class="title class_">char</span>[j * <span class="number">2</span>];</span><br><span class="line">            <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; bytes.length; i++) &#123;</span><br><span class="line">                <span class="type">byte</span> <span class="variable">b</span> <span class="operator">=</span> bytes[i];</span><br><span class="line">                chars[k++] = hexChars[b &gt;&gt;&gt; <span class="number">4</span> &amp; <span class="number">0xf</span>];</span><br><span class="line">                chars[k++] = hexChars[b &amp; <span class="number">0xf</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(chars);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;MD5加密出错!!!&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-1-9-页面文件的导入"><a href="#12-1-9-页面文件的导入" class="headerlink" title="12.1.9 页面文件的导入"></a>12.1.9 页面文件的导入</h3><ul>
<li>复制资源下的日程管理中的 HTML 到项目的 web 目录下即可</li>
</ul>
<p><img src="/images/1690363965192.png" alt="1690363965192"></p>
<h2 id="12-3-业务代码"><a href="#12-3-业务代码" class="headerlink" title="12.3 业务代码"></a>12.3 业务代码</h2><h3 id="12-3-1-注册业务处理"><a href="#12-3-1-注册业务处理" class="headerlink" title="12.3.1 注册业务处理"></a>12.3.1 注册业务处理</h3><ul>
<li>controller</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.pojo.SysUser;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.service.SysUserService;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.service.impl.SysUserServiceImpl;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/user/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysUserController</span>  <span class="keyword">extends</span> <span class="title class_">BaseContoller</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">SysUserService</span> <span class="variable">userService</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">SysUserServiceImpl</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 接收用户注册请求的业务处理方法( 业务接口 不是java中的interface  )</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">regist</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 1 接收客户端提交的参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">userPwd</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;userPwd&quot;</span>);</span><br><span class="line">        <span class="comment">// 2 调用服务层方法,完成注册功能</span></span><br><span class="line">            <span class="comment">//将参数放入一个SysUser对象中,在调用regist方法时传入</span></span><br><span class="line">        <span class="type">SysUser</span> <span class="variable">sysUser</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">SysUser</span>(<span class="literal">null</span>,username,userPwd);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rows</span> <span class="operator">=</span>userService.regist(sysUser);</span><br><span class="line">        <span class="comment">// 3 根据注册结果(成功  失败) 做页面跳转</span></span><br><span class="line">        <span class="keyword">if</span>(rows&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            resp.sendRedirect(<span class="string">&quot;/registSuccess.html&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            resp.sendRedirect(<span class="string">&quot;/registFail.html&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>service</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.pojo.SysUser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SysUserService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户完成注册的业务方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registUser 用于保存注册用户名和密码的对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 注册成功返回&gt;0的整数,否则返回0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">regist</span><span class="params">(SysUser registUser)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.dao.SysUserDao;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.dao.impl.SysUserDaoImpl;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.pojo.SysUser;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.service.SysUserService;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.util.MD5Util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysUserServiceImpl</span>  <span class="keyword">implements</span> <span class="title class_">SysUserService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">SysUserDao</span>  <span class="variable">userDao</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">SysUserDaoImpl</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">regist</span><span class="params">(SysUser sysUser)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将用户的明文密码转换为密文密码</span></span><br><span class="line">        sysUser.setUserPwd(MD5Util.encrypt(sysUser.getUserPwd()));</span><br><span class="line">        <span class="comment">// 调用DAO 层的方法  将sysUser信息存入数据库</span></span><br><span class="line">        <span class="keyword">return</span> userDao.addSysUser(sysUser);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>dao</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.pojo.SysUser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SysUserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向数据库中增加一条用户记录的方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sysUser 要增加的记录的username和user_pwd字段以SysUser实体类对象的形式接收</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 增加成功返回1 增加失败返回0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">addSysUser</span><span class="params">(SysUser sysUser)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.dao.BaseDao;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.dao.SysUserDao;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.pojo.SysUser;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysUserDaoImpl</span> <span class="keyword">extends</span> <span class="title class_">BaseDao</span> <span class="keyword">implements</span> <span class="title class_">SysUserDao</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">addSysUser</span><span class="params">(SysUser sysUser)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span><span class="string">&quot;insert into sys_user values(DEFAULT,?,?)&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> baseUpdate(sql,sysUser.getUsername(),sysUser.getUserPwd());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-3-2-登录业务处理"><a href="#12-3-2-登录业务处理" class="headerlink" title="12.3.2 登录业务处理"></a>12.3.2 登录业务处理</h3><ul>
<li>controller</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.pojo.SysUser;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.service.SysUserService;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.service.impl.SysUserServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.util.MD5Util;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/user/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysUserController</span>  <span class="keyword">extends</span> <span class="title class_">BaseContoller</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">SysUserService</span> <span class="variable">userService</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">SysUserServiceImpl</span>();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 接收用登录请求,完成的登录业务接口</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">login</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1 接收用户名和密码</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">userPwd</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;userPwd&quot;</span>);</span><br><span class="line">        <span class="comment">//2 调用服务层方法,根据用户名查询用户信息</span></span><br><span class="line">        <span class="type">SysUser</span> <span class="variable">loginUser</span> <span class="operator">=</span>userService.findByUsername(username);</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">null</span> == loginUser)&#123;</span><br><span class="line">            <span class="comment">// 跳转到用户名有误提示页</span></span><br><span class="line">            resp.sendRedirect(<span class="string">&quot;/loginUsernameError.html&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(! MD5Util.encrypt(userPwd).equals(loginUser.getUserPwd()))&#123;</span><br><span class="line">            <span class="comment">//3 判断密码是否匹配</span></span><br><span class="line">            <span class="comment">// 跳转到密码有误提示页</span></span><br><span class="line">            resp.sendRedirect(<span class="string">&quot;/loginUserPwdError.html&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//4 跳转到首页</span></span><br><span class="line">            resp.sendRedirect(<span class="string">&quot;/showSchedule.html&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>service</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.pojo.SysUser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SysUserService</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据用户名获得完整用户信息的方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username 要查询的用户名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 如果找到了返回SysUser对象,找不到返回null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    SysUser <span class="title function_">findByUsername</span><span class="params">(String username)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.atguigu.schedule.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.dao.SysUserDao;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.dao.impl.SysUserDaoImpl;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.pojo.SysUser;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.service.SysUserService;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.util.MD5Util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysUserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">SysUserService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">SysUserDao</span> <span class="variable">userDao</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">SysUserDaoImpl</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> SysUser <span class="title function_">findByUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="comment">// 调用服务层方法,继续查询</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> userDao.findByUsername(username);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>dao</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.pojo.SysUser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SysUserDao</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据用户名获得完整用户信息的方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username 要查询的用户名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 如果找到了返回SysUser对象,找不到返回null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    SysUser <span class="title function_">findByUsername</span><span class="params">(String username)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.dao.BaseDao;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.dao.SysUserDao;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.pojo.SysUser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysUserDaoImpl</span> <span class="keyword">extends</span> <span class="title class_">BaseDao</span> <span class="keyword">implements</span> <span class="title class_">SysUserDao</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> SysUser <span class="title function_">findByUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span><span class="string">&quot;select uid,username, user_pwd userPwd from sys_user where username = ?&quot;</span>;</span><br><span class="line">        List&lt;SysUser&gt; userList = baseQuery(SysUser.class, sql, username);</span><br><span class="line">        <span class="keyword">return</span>  <span class="literal">null</span> != userList&amp;&amp; userList.size()&gt;<span class="number">0</span>? userList.get(<span class="number">0</span>):<span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">valtsit</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://valtsit.github.io/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/">http://valtsit.github.io/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">valtsit</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/web/">
                                    <span class="chip bg-color">web</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="far fa-dot-circle"></i>&nbsp;本篇
            </div>
            <div class="card">
                <a href="/2024/03/24/05_%E7%AC%AC%E4%BA%94%E7%AB%A0%20Servlet/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/5.webp" class="responsive-img" alt="05_第五章 Servlet">
                        
                        <span class="card-title">05_第五章 Servlet</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2024-03-24
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            valtsit
                            
                        </span>
                    </div>
                </div>

                
                <div class="card-action article-tags">
                    
                    <a href="/tags/web/">
                        <span class="chip bg-color">web</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2024/03/24/06_%E7%AC%AC%E5%85%AD%E7%AB%A0%20%E4%BC%9A%E8%AF%9D_%E8%BF%87%E6%BB%A4%E5%99%A8_%E7%9B%91%E5%90%AC%E5%99%A8/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/7.webp" class="responsive-img" alt="06_第六章 会话_过滤器_监听器">
                        
                        <span class="card-title">06_第六章 会话_过滤器_监听器</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2024-03-24
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            valtsit
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/web/">
                        <span class="chip bg-color">web</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>



<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="599288682"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2024</span>
            
            <a href="/about" target="_blank">valtsit</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/valtsit" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:3493767495@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=3493767495" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 3493767495" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
    
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
